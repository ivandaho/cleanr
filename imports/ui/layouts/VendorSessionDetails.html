<template name="VendorSessionDetails">
  <section id="sess" class="bg-light-gray">
    <div class="container">
    {{#if sess}}
      <div class="row text-center">
        <div class="col-lg-12">
          <h2 class="quick-view-rpts-h2">Session Details</h2>
          <p class="quick-view-rpts-p">--</p>
        </div>
        <div class="col-lg-3">
          <a href="/vendorworkschedule" class="btn btn-default">Back to Schedule</a>
        </div>
      </div>
      <div class="row bordered">
        <div class="row">
          <div class="col-md-12 text-center bighdr">
            Session Details
          </div>
        </div>
        <div class="row-same-height">
          <div class="col-md-4 col-sm-height">
            <div class="hdr">
              Team
            </div>
            <div class="value">
              $_Alpha <button type="button" class="btn btn-default">Change</button>
            </div>
            <div class="hdr">
              Session Status
            </div>
            <div class="value">
              {{#with getsessionstatus sess}}
                <!-- if session not completed -->
                Not Completed
                {{#with overdate sess}}
                  <button type="button" class="btn btn-success btn-mark-completed">Mark as Completed</button>
                {{/with}}
              {{else}}
                Completed
                <button type="button" class="btn btn-warning btn-mark-not-completed">Mark as Incomplete</button>
              {{/with}}
            </div>
            <br>
            <div class="placeholderthing">
            </div>
          </div>
          <div class="col-md-4 col-sm-height padded">
            <div class="hdr">
              Date
            </div>
            <div class="value">
              {{sess_day sess}}, {{sess_date sess}}
            </div>
            <div class="hdr">
              Time
            </div>
            <div class="value">
              {{sess_slotstr sess}}
            </div>
            <div class="hdr">
              Session ID
            </div>
            <div class="value">
              {{sess._id}}
            </div>
            <div class="placeholderthing">
            </div>
          </div>
          <div class="col-md-4 col-sm-height">
            <div class="hdr">
              Next Session
            </div>
            <div class="value">
              {{#with sess_nextsessdate sess}}
                {{this}}
              {{else}}
                None
              {{/with}}
            </div>
            <div class="placeholderthing">
            </div>
            <div clas="text-center">
              <div class="vs-btndiv">
                {{#with nextsessid sess 'prv'}}
                  <a href="/vendorsessiondetails/{{this}}" class="btn btn-default nextprevbtn">Previous session</a>
                {{else}}
                  <a href="#" class="btn btn-default nextprevbtn disabled">No Earlier Session</a>
                {{/with}}
                {{#with nextsessid sess 'nxt'}}
                <a href="/vendorsessiondetails/{{this}}" class="btn btn-default nextprevbtn">Next session</a>
                {{else}}
                  <a href="#" class="btn btn-default nextprevbtn disabled">No Next Session</a>
                {{/with}}
              </div>
            </div>
          </div>
        </div>
      </div>
      {{#with thebooking sess}}
      <div class="row bordered">
        <div class="row">
          <div class="col-md-12 text-center bighdr">
            Booking Details
          </div>
        </div>
        <div class="row-same-height">
          <div class="col-md-4 col-sm-height">
            <div class="hdr">
              Package
            </div>
            <div class="value">
              $_2 maids for 2 hours
            </div>
            <div class="hdr">
              Additional Services
            </div>
            <div class="value">
              {{#if mc}}Mattress Cleaning<br>{{/if}}
              {{#if cc}}Carpet Cleaning<br>{{/if}}
            </div>
            <div class="placeholderthing">
            </div>
          </div>
          <div class="col-md-4 col-sm-height padded"> <!-- padded?? -->
            <div class="hdr">
              Booking ID
            </div>
            <div class="value">
              {{_id}}
            </div>
            <div class="text-center">
              <div class="vs-btndiv">
                <a href="/booking/{{_id}}" class="btn btn-default nextprevbtn">View Details</a>
              </div>
            </div>
          </div>
          <div class="col-md-4 col-sm-height padded">
            <div class="hdr">
              Date Booked
            </div>
            <div class="value">
              {{formatdate subdate}}
            </div>
            <div class="hdr">
              Sessions Completed
            </div>
            <div class="value">
              {{#if completed}}{{this}}{{else}}$completed{{/if}}
            </div>
            <div class="hdr">
              Subscription Status
            </div>
            <div class="value">
              {{#if substatus}}{{this}}{{else}}$substatus{{/if}}
            </div>
          </div>
        </div>
      </div>
      {{/with}}
      {{#with cust sess}}
      <div class="row bordered">
        <div class="row">
          <div class="col-md-12 text-center bighdr">
            Customer Details
            <a href="/vendorcustomer/{{_id}}" class="btn btn-default">View Profile</a>
          </div>
        </div>
        <div class="row-same-height">
          <div class="col-md-4 col-sm-height">
            <div class="hdr">
              Name
            </div>
            <div class="value">
              {{user_name}}
            </div>
            <div class="hdr">
              Mobile Number
            </div>
            <div class="value">
              {{user_tel}}
            </div>
          </div>
          <div class="col-md-4 col-sm-height padded">
            <div class="hdr">
              Address
            </div>
            <div class="value">
              {{user_address.[0].street}} <br>
              {{user_address.[0].city}} <br>
              {{user_address.[0].state}} <br>
              {{user_address.[0].zip}}
            </div>
          </div>
          <div class="col-md-4 col-sm-height">
            <div class="hdr">
              Customer ID
            </div>
            <div class="value">
              {{_id}}
            </div>
          </div>
        </div>
      </div>
      {{/with}}
      <div class="row bordered">
        <div class="row">
          <div class="col-md-12 text-center bighdr">
            Remarks
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <div class="hdr">
              Customer Remarks:
            </div>
            <ol>
            {{#each custremarkfound sess}}
              <div class="value">
                <li>
                  {{this}}
                  {{#if iscustomer sess}}
                  <button type="button" class="btn btn-xs btn-warning cedit" id="{{this}}">Edit</button>
                  <button type="button" class="btn btn-xs btn-danger crm" id="{{this}}">Remove</button>
                  {{/if}}
                </li>
              </div>
            {{/each}}
            {{#if iscustomer sess}}
            <button type="button" class="btn btn-xs cadd">Add a remark</button>
            {{/if}}
            </ol>
          </div>
          <div class="col-md-4 col-sm-height padded">
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <div class="hdr">
              Cleaner Remarks:
            </div>
            <ol>
            {{#each vendremarkfound sess}}
              <div class="value">
                <li>
                  {{this}}
                  {{#if isvendor sess}}
                    <button type="button" class="btn btn-xs btn-warning vedit" id="{{this}}">Edit</button>
                    <button type="button" class="btn btn-xs btn-danger vrm" id="{{this}}">Remove</button>
                  {{/if}}
                </li>
              </div>
            {{/each}}
            {{#if isvendor sess}}
            <button type="button" class="btn btn-xs vadd">Add a remark</button>
            {{/if}}
            </ol>
          </div>
          <div class="col-md-4 col-sm-height padded">
          </div>
        </div>
      </div>
        {{else}}
          <div class="col-md-4 col-sm-height text-center padded">
            We couldn't find that session. Either the URL is invalid, or you are unauthorized to view session details for this session.
          </div>

        {{/if}}
    </div>
  </section>
</template>
